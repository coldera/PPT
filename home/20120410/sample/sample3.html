<!DOCTYPE html>
<html>
<head>
<title>D2-编写可维护可扩展的JS组件</title>
<meta charset="utf-8">
<link rel="stylesheet" href="/PPT/home/frame.css" />
</head>
<body>
<header id="header">
    <h1>命令模式</h1>
</header>
<div id="content">
    <nav>
        <ol>
            <li>传统方式</li>
            <li>利用命令模式</li>
            <li>组件管理器模型</li>
            <li>组件管理器 level up</li>
        </ol>
    </nav>
    <div id="body">
        <div class="wrap">
            <section class="item">
                <h2>传统方式</h2>
                <pre class="content">
            <code>
            var Tom, Lily, Lucy;
            
            $.listen('today is sunday', function() {
            
                ...（此处省略100行代码）
            
                Tom.takePictures();
                Lily.takePictures();
                Lucy.takePictures();
            });
            </code>
                </pre>
                <ul>
                    <li>Tom, Lily, Lucy 有相同的行为 组团takePictures</li>
                    <li>一个事件发起，要求有相同行为的要做出响应</li>
                    <li>组员的加入退出，会使代码频繁改动</li>
                </ul>
            </section>
            
            <section class="item">
                <h2>利用命令模式</h2>
                <pre class="content">
            <code>
            var Tom, Lily, Lucy;
            
            $.listen('today is sunday', function() {
            
                ...（此处省略100行代码）
            
                <em>$.command('takePictures');</em>
            });
            </code>
                </pre>
            </section>
            
            <section class="item">
                <h2>组件管理器模型</h2>
                <pre class="content">
            <code>
            var cpnMgr = {
                cache: [],
                add: function(name, cpn) {
                
                    ...（此处省略100行代码）
                
                    this.cache.push({n: name, o: cpn});
                },
                remove: function(name) {
                    var new_cache = [];
                    
                    _util.forEach(this.cache, function(item) {
                        new_cache[new_cache.length] = item;
                    });
                    
                    this.cache = new_cache;
                },
                cmd: function(key, name) {
                    var _args = [].slice.call(arguments, 2);
                        
                    _util.forEach(this.cache, function(cpn) {
                        if(typeof cpn.o[cmd] === 'function') {
                            cpn.o[cmd].apply(cpn.o, _args);
                        }
                    });
                }
            };
            </code>
                </pre>
            </section>
            
            <section class="item">
                <h2>组件管理器 level up</h2>
                <pre class="content">
            <code>
            var cpnMgr = {
                cache: [],
                add: function(name, cpn) {
                
                    ...（此处省略100行代码）
                
                    this.cache.push({n: name, o: cpn});
                },
                remove: function(name) {
                    var new_cache = [];
                    
                    _util.forEach(this.cache, function(item) {
                        new_cache[new_cache.length] = item;
                    });
                    
                    this.cache = new_cache;
                },
                cmd: function(key, name) {
                    var _args = [].slice.call(arguments, 2);
                        
                    _util.forEach(this.cache, function(cpn) {
                        if(typeof cpn.o[cmd] === 'function') {
                            cpn.o[cmd].apply(cpn.o, _args);
                        }
                    });
                }
            };
            </code>
                </pre>
            </section>
        </div>
    </div>
</div>

<script type="text/javascript">
var menuSetting = {
    '传统方式': 0,
    '利用命令模式': 1,
    '组件管理器模型': 2,
    '组件管理器 level up': 3
}
</script>
<script src="/PPT/home/frame.js" type="text/javascript"></script>
</body>
</html>
